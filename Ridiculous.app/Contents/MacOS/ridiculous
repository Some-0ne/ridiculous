#!/bin/bash

# macOS App Bundle wrapper for Ridiculous Enhanced

# Get the directory where this script is located
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
BUNDLE_DIR="$(dirname "$(dirname "$SCRIPT_DIR")")"

# Check if we should launch GUI or terminal
if [[ "$1" == "--gui" ]] || [[ -z "$1" && -t 1 ]]; then
    # Terminal is available, run CLI interface
    exec "$SCRIPT_DIR/ridiculous-cli" "$@"
else
    # Try to launch in Terminal.app
    osascript -e "
        tell application \"Terminal\"
            activate
            do script \"cd '$BUNDLE_DIR' && ./Contents/MacOS/ridiculous-cli --gui\"
        end tell
    " 2>/dev/null || {
        # Fallback: run directly
        exec "$SCRIPT_DIR/ridiculous-cli" "$@"
    }
fi
